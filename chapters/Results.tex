\chapter{Results}\label{chapter:Results}
Now that the models are set and run, the RMSE are collected it is time to evaluate the results of the different models. The results will be evaluated in two ways. The first is the RMSE of the training set. The lower the error is, the better the model fits the test. But using only this method is not a good indicator whether the model will fit future data. This is why in a second evaluation the difference between the error of the training set is compared to the test set. The test set, including the training data, is run through the algorithm the same way as the training set to calculate the error.\newline
The evaluation is done for all orders as well as for a restaurant. Since yum2take was chosen to be the best example with the best data, the evaluation of the results is done on this restaurant.\newline
For each model, the best results are presented in a table. Since there are many options for the weighted moving average and simple exponential smoothing, only the lowest error and thus best result from the training set is displayed. This is done since when the forecast would be done, only the present result can be used and thus the lowest error would be chosen. The table contains the algorithm used in the most left column and two columns for each order set, for yum2take on the left and for all orders on the right. For each set there are the names of each set and the number of orders it contains as well as the difference between the error of the two sets.
\section{No time categorization}\label{section:No time categorization}
This forecast was done by using all previous orders for the current forecast. The results are shown in Tabular \ref{tab:No time categorization results}.
\begin{table}[h]
\centering
\caption{No time categorization results}
\label{tab:No time categorization results}
\scalebox{0.5}{%
\begin{tabular}{lllllll}
\hline
              & \multicolumn{3}{l}{yum2take}                                                                                                 & \multicolumn{3}{l}{all}                                                                                                        \\ \hline
Algorithm     & \begin{tabular}[c]{@{}l@{}}training\\ \#686\end{tabular} & \begin{tabular}[c]{@{}l@{}}test\\ \#945\end{tabular} & difference & \begin{tabular}[c]{@{}l@{}}training\\ \#2129\end{tabular} & \begin{tabular}[c]{@{}l@{}}test\\ \#3196\end{tabular} & difference \\ \hline
MA            & 6.02755                                                  & 5.950609                                             & -0.07694   & 8.409876                                                  & 8.565466                                              & 0.15559    \\ \hline
MA (650/2125) & 5.738142                                                 & 5.880966                                             & 0.142823   & 4.542798                                                  & 8.976687                                              & 4.433889   \\ \hline
SES (0.1/0.1) & 6.116109                                                 & 5.973192                                             & -0.14291   & \multicolumn{1}{l}{8.560794}                             & \multicolumn{1}{l}{8.65649}                          & 0.095695   \\ \hline
\end{tabular}}
\end{table}
\newline\textbf{All orders}\newline
The results when having no time categorization and using all orders are not very convenient. Most of the values are around 8 to 9 minutes which result in an arrival window of 16 to 18 minutes which is far worse than just being there after 15 minutes. For the weighted moving average it can be said that the more orders taken into account the result improves. This pretty normal since the average is getting closer to what it actually is the bigger the set of values for calculation gets. The only anomaly is an outlier result when using the weighted average which shows that using always the best result from the training data set is not the best choice. This categorization is not feasible for real life usage.\newline
The difference between the two sets is almost always under one minute, except for the outlier, which makes it neglectable for the purpose of this forecast.
\newline\newline\textbf{Only yum2take orders}\newline
The RMSE of the difference between forecasted preparation time and the actual one for the different moving average variations are all pretty much the same. They are close to 6 minutes which results roughly in a 12 minute window for the driver to pick up the food just in time at the restaurant. The weighted moving average consists of different sizes for the weight. It is done in steps of 25 orders more. It is pretty stable at around 6 minutes when under 200 orders are taken into account of the calculation. Until a weight of around 600 orders the error is slightly higher, lowering for around three quarters of a minute when almost all orders are taken into account. This result may be caused by having only a few orders left when taking many for the forecasted value.\newline
The difference for yum2take\'s sets is also very low and constant and hence can be ignored.
\section{No time but slot categorization}\label{section:No time but slot categorization}
After separating the orders into their slots chronological, only previous orders from this slot were used for the forecast. The results are shown in Tabular \ref{tab:No time but slot categorization results}.
\begin{table}[h]
\centering
\caption{No time but slot categorization results}
\label{tab:No time but slot categorization results}
\scalebox{0.5}{%
\begin{tabular}{lllllll}
\hline
             & \multicolumn{3}{l}{yum2take}                                                                                                 & \multicolumn{3}{l}{all}                                                                                                        \\ \hline
Algorithm    & \begin{tabular}[c]{@{}l@{}}training\\ \#686\end{tabular} & \begin{tabular}[c]{@{}l@{}}test\\ \#945\end{tabular} & difference & \begin{tabular}[c]{@{}l@{}}training\\ \#2129\end{tabular} & \begin{tabular}[c]{@{}l@{}}test\\ \#3196\end{tabular} & difference \\ \hline
MA           & 5.980634                                                 & 5.943105                                             & -0.03752   & 8.203962                                                  & 8.514927                                              & 0.310964   \\ \hline
MA (25/100)  & 6.165134                                                 & 6.017991                                             & -0.14714   & 7.957781                                                  & 8.492864                                              & 0.535082   \\ \hline
SES (0.1/0.1) & 6.065397                                                 & 5.982731                                             & -0.08266   & 8.379257                                                  & 8.618189                                              & 8.618189   \\ \hline
\end{tabular}}
\end{table}
\newline\newline\textbf{All orders}\newline
The results for this models are around 8 minutes which is still too high but better than without the use of slots.
 The difference of RMSE for each set is again with around half a minute neglectable.
\newline\newline\textbf{Only yum2take orders}\newline
For yum2take the results are better than for the forecast which uses all orders. The moving average has the best result with about 6 minutes. When weighted it increases to 6.1 minutes, for both weights, namely 15 and 30 orders, which is not much difference to the training set result. Same goes for the simple exponential smoothing, where the RMSE and the difference between the sets grows the bigger $\alpha$ gets. The difference between training set is for all models neglectable because it is around 0.5 minute which has is too small for the real life scenario.
\section{Day categorization}\label{section:Day categorization}
The results in Tabular \ref{tab:Day categorization} are generated for categorization by day where only previous orders of the current day are taken into account for the forecast of the next value.
\begin{table}[h]
\centering
\caption{Day categorization results}
\label{tab:Day categorization}
\scalebox{0.5}{%
\begin{tabular}{lllllll}
\hline
             & \multicolumn{3}{l}{yum2take}                                                                                                 & \multicolumn{3}{l}{all}                                                                                                        \\ \hline
Algorithm    & \begin{tabular}[c]{@{}l@{}}training\\ \#686\end{tabular} & \begin{tabular}[c]{@{}l@{}}test\\ \#945\end{tabular} & difference & \begin{tabular}[c]{@{}l@{}}training\\ \#2129\end{tabular} & \begin{tabular}[c]{@{}l@{}}test\\ \#3196\end{tabular} & difference \\ \hline
MA           & 6.011955                                                 & 5.993232                                             & -0.01872   & 8.403266                                                  & 8.57489                                               & 0.171623   \\ \hline
SES (0.1/0.1) & 6.080652                                                 & 5.995665                                             & -0.08498   & 8.434747                                                  & 8.57399                                               & 0.139242           \\ \hline
\end{tabular}}
\end{table}
\newline\newline\textbf{All orders}\newline
When forecasting on daily basis most results are about 8.5 minutes. This is not an improvement over the categorizations before, even though the error decreased.
\newline\newline\textbf{Only yum2take orders}\newline
As before, the results for yum2take are better with a time frame from around 6 minutes instead of 8 minutes which is due to the more specific data. The moving average has one of the best results with around 6.1 minute. The moving average ranges from 6.1 to 6.6 minutes. The worst results come from the smallest (4 orders, 6.4 minutes) and greatest (16 orders, 6.6 minutes) while the weight of 8 and 12 orders has an RMSE of around 6.1 minutes. When using the simple exponential smoothing, the results range from 6.0 minutes for an $\alpha$ of 0.2 to 6.29 for an $\alpha$
\section{Day and slot categorization}\label{section:Day and slot categorization}
For this the data set was split into the three slots for each day. The results are shown in Tabular \ref{tab:Day and slot categorization results}.
\begin{table}[h]
\centering
\caption{Day and slot categorization}
\label{tab:Day and slot categorization results}
\scalebox{0.5}{%
\begin{tabular}{lllllll}
\hline
             & \multicolumn{3}{l}{yum2take}                                                                                                 & \multicolumn{3}{l}{all}                                                                                                        \\ \hline
Algorithm    & \begin{tabular}[c]{@{}l@{}}training\\ \#686\end{tabular} & \begin{tabular}[c]{@{}l@{}}test\\ \#945\end{tabular} & difference & \begin{tabular}[c]{@{}l@{}}training\\ \#2129\end{tabular} & \begin{tabular}[c]{@{}l@{}}test\\ \#3196\end{tabular} & difference \\ \hline
MA           & 6.011955                                                 & 5.993232                                             & -0.01872   & 8.162479                                                  & 8.535424                                              & 0.372944   \\ \hline
MA (15/60)   & 6.127325                                                 & 6.109218                                             & -0.0181    & 7.859824                                                  & 8.737695                                              & 0.87787    \\ \hline
SES (0.1/0.1) & 6.04016                                                  & 6.104262                                             & 0.064101   & 8.220405                                                  & 8.581225                                              & 0.360819   \\ \hline
\end{tabular}}
\end{table}
\newline\newline\textbf{All orders}\newline
This categorization is an improvement over the one without slot categorization. This shows that going for a finer categorization can help to improve results. But since the results are still too high with 8 minutes and for the test set they even increase, this is not a usable categorization.
\newline\newline\textbf{Only yum2take orders}\newline
\section{Week categorization}\label{section:Week categorization}
The results of categorization by weekday is shown in Tabular \ref{tab:Week categorization result}.
\begin{table}[h]
\centering
\caption{Week categorization result}
\label{tab:Week categorization result}
\scalebox{0.5}{%
\begin{tabular}{lllllll}
\hline
              & \multicolumn{3}{l}{yum2take}                                                                                                 & \multicolumn{3}{l}{all}                                                                                                        \\ \hline
Algorithm     & \begin{tabular}[c]{@{}l@{}}training\\ \#686\end{tabular} & \begin{tabular}[c]{@{}l@{}}test\\ \#945\end{tabular} & difference & \begin{tabular}[c]{@{}l@{}}training\\ \#2129\end{tabular} & \begin{tabular}[c]{@{}l@{}}test\\ \#3196\end{tabular} & difference \\ \hline
MA            & 6.074067                                                 & 5.967819                                             & -0.10624   & 8.402317                                                  & 8.568181                                              & 0.165863   \\ \hline
MA (8/16)     & 6.120197                                                 & 5.949482                                             & -0.17071   & 8.164492                                                  & 8.814434                                              &            \\ \hline
SES (0.2/0.2) & 6.008943                                                 & 5.981932                                             & -0.02701   & 8.399327                                                  & 8.580201                                              & 0.180873   \\ \hline
\end{tabular}}
\end{table}
\newline\newline\textbf{All orders}\newline
When separating by week the resulting RMSE is around 8.4 minutes which is almost the level of the other models and not usable. Also the difference increases for each algorithm, but only by a neglectable amount.
\newline\newline\textbf{Only yum2take orders}\newline
\section{Week and slot categorization}\label{section:Week and slot categorization}
In Tabular \ref{tab:Week and slot categorization results} the results for week and slot categorization are shown.
\begin{table}[h]
\centering
\caption{Week and slot categorization results}
\label{tab:Week and slot categorization results}
\scalebox{0.5}{%
\begin{tabular}{lllllll}
\hline
              & \multicolumn{3}{l}{yum2take}                                                                                                 & \multicolumn{3}{l}{all}                                                                                                        \\ \hline
Algorithm     & \begin{tabular}[c]{@{}l@{}}training\\ \#686\end{tabular} & \begin{tabular}[c]{@{}l@{}}test\\ \#945\end{tabular} & difference & \begin{tabular}[c]{@{}l@{}}training\\ \#2129\end{tabular} & \begin{tabular}[c]{@{}l@{}}test\\ \#3196\end{tabular} & difference \\ \hline
MA            & 6.048462                                                 & 6.013698                                             & -0.03476   & 8.21474                                                   & 8.532601                                              & 0.31786    \\ \hline
MA (8/12)     & 6.137753                                                 & 5.952349                                             & -0.1854    & 8.133761                                                  & 8.843515                                              & 0.709754   \\ \hline
SES (0.3/0.3) & 5.935083                                                 & 6.155115                                             & 0.220032   & 8.18856                                                   & 8.615477                                              &  0.426916          \\ \hline
\end{tabular}}
\end{table}
\newline\newline\textbf{All orders}\newline
When forecasting on weekday and slot basis the RMSE there is still not much difference to the other models. The values are still between 8.2 minutes and 8.7 minutes which is not acceptable for a forecast like this.
\newline\newline\textbf{Only yum2take orders}\newline
\section{Weekday categorization}\label{section:Weekday categorization}
Weekday categorization results in the following values shown in Tabular \ref{Weekday categorization results}.
\begin{table}[h]
\centering
\caption{Weekday categorization results}
\label{Weekday categorization results}
\scalebox{0.5}{%
\begin{tabular}{lllllll}
\hline
              & \multicolumn{3}{l}{yum2take}                                                                                                 & \multicolumn{3}{l}{all}                                                                                                        \\ \hline
Algorithm     & \begin{tabular}[c]{@{}l@{}}training\\ \#686\end{tabular} & \begin{tabular}[c]{@{}l@{}}test\\ \#945\end{tabular} & difference & \begin{tabular}[c]{@{}l@{}}training\\ \#2129\end{tabular} & \begin{tabular}[c]{@{}l@{}}test\\ \#3196\end{tabular} & difference \\ \hline
MA            & 6.208329                                                 & 6.07587                                              & -0.13245   & 8.582432                                                  & 8.660576                                              & 0.078144   \\ \hline
MA (8/12)     & 6.181677                                                 & 6.105938                                             & -0.07573   & 8.08649                                                   & 8.700854                                              & 0.614363   \\ \hline
SES (0.2/0.3) & 6.23239                                                  & 6.113957                                             & -0.11843   & 8.573267                                                  & 8.683558                                              &  0.110291          \\ \hline
\end{tabular}}
\end{table}
\newline\newline\textbf{All orders}\newline
The results of weekday categorization are also in the same value spectrum then the other models, ranging from around 8 minutes up to 8.7 minutes as RMSE.
\newline\newline\textbf{Only yum2take orders}\newline
\section{Weekday and slot categorization}\label{section:Weekday and slot categorization}
\begin{table}[h]
\centering
\caption{Weekday and slot categorization results}
\label{Weekday and slot categorization results}
\scalebox{0.5}{%
\begin{tabular}{lllllll}
\hline
              & \multicolumn{3}{l}{yum2take}                                                                                                 & \multicolumn{3}{l}{all}                                                                                                        \\ \hline
Algorithm     & \begin{tabular}[c]{@{}l@{}}training\\ \#686\end{tabular} & \begin{tabular}[c]{@{}l@{}}test\\ \#945\end{tabular} & difference & \begin{tabular}[c]{@{}l@{}}training\\ \#2129\end{tabular} & \begin{tabular}[c]{@{}l@{}}test\\ \#3196\end{tabular} & difference \\ \hline
MA            & 6.063212                                                 & 6.13718                                              & 0.073968   & 8.448001                                                  & 8.73583                                               & 0.287828   \\ \hline
MA (12/12)    & 4.202483                                                 & 5.802201                                             & 1.599717   & 8.117922                                                  & 8.913511                                              & 0.795589   \\ \hline
SES (0.3/0.2) & 6.319075                                                 & 6.163683                                             & -0.15539   & 8.378466                                                  & 8.720113                                              &            \\ \hline
\end{tabular}}
\end{table}
\newline\newline\textbf{All orders}\newline
\newline\newline\textbf{Only yum2take orders}\newline
\section{Single slot categorization}\label{section:Single slot categorization}
For this categorization the minislot was introduced, dividing the day into 30 minutes slots which are forecasted seperately. The results are shown in Tabular \ref{Single slot categorization results}.
\begin{table}[h]
\centering
\caption{Single slot categorization results}
\label{Single slot categorization results}
\scalebox{0.5}{%
\begin{tabular}{lllllll}
\hline
              & \multicolumn{3}{l}{yum2take}                                                                                                 & \multicolumn{3}{l}{all}                                                                                                        \\ \hline
Algorithm     & \begin{tabular}[c]{@{}l@{}}training\\ \#686\end{tabular} & \begin{tabular}[c]{@{}l@{}}test\\ \#945\end{tabular} & difference & \begin{tabular}[c]{@{}l@{}}training\\ \#2129\end{tabular} & \begin{tabular}[c]{@{}l@{}}test\\ \#3196\end{tabular} & difference \\ \hline
MA            & 6.206459                                                 & 6.078068                                             & -0.12839   & 8.122773                                                  & 8.408003                                              & 0.28523    \\ \hline
SES (0.1/0.2) & 6.347103                                                 & 6.149942                                             & -0.19716   & 8.670448                                                  & 8.752016                                              &  0.081567          \\ \hline
\end{tabular}}
\end{table}
\newline\newline\textbf{All orders}\newline
This categorization results in a relatively low moving average RMSE but the other result are still high.
\newline\newline\textbf{Only yum2take orders}\newline
\section{Combination of Categorizations}\label{section:Combination of Categorizations}
The results for the combined model are treated differently. Since there are over thirty thousand combinations for the weights and algorithm used, only the best results were looked at. It was decided to extract the 5 best results for the test set. The results are saved into an excel file including the algorithm used and the weighting of the different factors.
\newline\newline\textbf{All orders}\newline
When searching for the lowest error on the training set, the result is about 8.947 minutes. It is the result of different combinations. The most occurring one is a mix from 20\% of the forecast of the current slot and 25\% of the forecast from the current day. The rest is mostly created from the last 7 day’s forecast as well as the slot in the last 4 weeks. These combinations produce the most accurate forecasts. Overall there are only good forecasts generated by the normal moving average.
\begin{table}[h]
\centering
\caption{Combination of Categorizations results for all orders}
\label{Combination of Categorizations results for all orders}
\scalebox{0.5}{%
\begin{tabular}{llllllllll}
\hline
yum2take  & \multicolumn{3}{l}{Results}                 & \multicolumn{6}{l}{Weights}                                                                           \\ \hline
Algorithm & training      & test          & difference  & \multicolumn{3}{l}{slot} & \multicolumn{3}{l}{all orders}                                             \\ \hline
          & \#2129 orders & \#3196 orders &             & today & 7 days & 4 weeks & today & 7 days & \begin{tabular}[c]{@{}l@{}}weekday\\ 4 weeks\end{tabular} \\ \hline
MA        & 8.947472944   & 9.009768419   & 0.062295475 & 20    & 10     & 15      & 25    & 30     & 0                                                         \\ \hline
MA        & 8.947526044   & 9.009875609   & 0.062349565 & 20    & 5      & 20      & 25    & 30     & 0                                                         \\ \hline
MA        & 8.947812087   & 9.00973973    & 0.061927643 & 20    & 15     & 10      & 25    & 30     & 0                                                         \\ \hline
MA        & 8.947971379   & 9.010061298   & 0.062089919 & 20    & 0      & 25      & 25    & 30     & 0                                                         \\ \hline
MA        & 8.948138981   & 9.009792703   & 0.061653722 & 20    & 10     & 15      & 25    & 25     & 5                                                         \\ \hline
\end{tabular}}
\end{table}
\newline\newline\textbf{Only yum2take orders}\newline
The results show that the best combination for yum2take consists of 25\% current slot’s forecast, 15\% of the current day\’s forecast and 20\% of the forecast of the slot for the predecessing 7 days. The rest of weight is combined from the other forecasts and all forecasts are using moving average as algorithm. This results in an error of about 6.26 minutes.
\begin{table}[h]
\centering
\caption{Combination of Categorizations results for yum2take}
\label{Combination of Categorizations results for yum2take}
\scalebox{0.5}{%
\begin{tabular}{llllllllll}
\hline
all orders  & \multicolumn{3}{l}{Results}                & \multicolumn{6}{l}{Weights}                                                                           \\ \hline
Algorithm & training     & test         & difference   & \multicolumn{3}{l}{slot} & \multicolumn{3}{l}{all orders}                                             \\ \hline
          & \#686 orders & \#945 orders &              & today & 7 days & 4 weeks & today & 7 days & \begin{tabular}[c]{@{}l@{}}weekday\\ 4 weeks\end{tabular} \\ \hline
MA        & 6.265421304  & 6.118386791  & -0.147034513 & 25    & 20     & 15      & 15    & 0      & 25                                                        \\ \hline
MA        & 6.265551527  & 6.118048866  & -0.147502661 & 25    & 20     & 15      & 15    & 5      & 20                                                        \\ \hline
MA        & 6.265856228  & 6.117902793  & -0.147953435 & 25    & 15     & 20      & 15    & 0      & 25                                                        \\ \hline
MA        & 6.265868384  & 6.117507337  & -0.148361047 & 25    & 15     & 20      & 15    & 5      & 20                                                        \\ \hline
MA        & 6.265946422  & 6.117772134  & -0.148174288 & 25    & 20     & 15      & 15    & 10     & 15                                                        \\ \hline
\end{tabular}}
\end{table}

\section{All orders versus yum2take}\label{section:All orders versus yum2take}
Now that there are results the corresponding models of the "all orders" forecast versus the "yum2take" forecast can be compared. The differences are very clear on the first sight. For each of the models the result from yum2take is a lot better than the one using all orders. The explanation for this outcome is pretty simple. While for one restaurant the preparation times do not vary that much the opposite is the case when putting a lot of restaurants together. If it is not distinguished between the restaurants, a forecast with wrong assumptions is made which results in a high error.
